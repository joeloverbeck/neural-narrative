<!-- templates/chat.html -->
{% extends 'base.html' %}

{% block title %}Chat{% endblock %}

{% block content %}
<h1>Chat with Participants</h1>

<div class="chat-window" id="chat-window">
    {% for message in dialogue %}
    <div class="chat-bubble {{ message.alignment }}">
        <img alt="{{ message.sender_name }}" class="avatar" src="{{ message.sender_photo_url }}">
        <div class="message-content">
            <div class="sender-name">{{ message.sender_name }}</div>
            <div class="message-text">{{ message.message_text }}</div>
        </div>
    </div>
    {% endfor %}
</div>

<form method="post">
    <input id="user-input" name="user_input" placeholder="Type your message here..." required type="text">
    <input type="submit" value="Send">
</form>

<script>
    // Ensure that the DOM is fully loaded before running the script
    document.addEventListener('DOMContentLoaded', function () {
        // Focus the input field with id 'user-input'
        var inputField = document.getElementById('user-input');
        if (inputField) {
            inputField.focus();  // Automatically focus the input field
        }

        // Ensure the chat window scrolls to the bottom
        var chatWindow = document.getElementById('chat-window');
        if (chatWindow) {
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }
    });
</script>
{% endblock %}